<!-- Page elements are referenced to "Start Bootstrap - SB Admin 2 v3.3.7+1 (http://startbootstrap.com/template-overviews/sb-admin-2)
 * Copyright 2013-2016 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)"-->

<!-- Page elements and frameworks are referenced to Bootstrap v3.3.7 (http://getbootstrap.com/)-->

<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Dashboard - Teameet</title>

    <!-- Bootstrap Core CSS -->
    <link href="../static/main-admin/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../static/main-admin/css/metisMenu.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../static/main-admin/css/sb-admin-2.css" rel="stylesheet">
    <link href="../static/main-admin/css/dashboard_style.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../static/main-admin/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- DataTables CSS -->
    <link href="../static/main-admin/css/dataTables.bootstrap.css" rel="stylesheet">

    <!-- DataTables Responsive CSS -->
    <link href="../static/main-admin/css/dataTables.responsive.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/buttons/1.2.4/css/buttons.dataTables.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- jQuery -->
    <script src="../static/main-admin/js/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../static/main-admin/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../static/main-admin/js/metisMenu.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../static/main-admin/js/sb-admin-2.js"></script>

    <!-- Tab with material-design style is referenced to: http://bootsnipp.com/snippets/featured/material-design-tab-style -->
    <style>
        .nav-tabs { border-bottom: 2px solid #DDD; }
        .nav-tabs > li.active > a, .nav-tabs > li.active > a:focus, .nav-tabs > li.active > a:hover { border-width: 0; }
        .nav-tabs > li > a { border: none; color: #666; }
        .nav-tabs > li.active > a, .nav-tabs > li > a:hover { border: none; color: #4285F4 !important; background: transparent; }
        .nav-tabs > li > a::after { content: ""; background: #4285F4; height: 2px; position: absolute; width: 100%; left: 0px; bottom: -1px; transition: all 250ms ease 0s; transform: scale(0); }
        .nav-tabs > li.active > a::after, .nav-tabs > li:hover > a::after { transform: scale(1); }
        .tab-nav > li > a::after { background: #21527d none repeat scroll 0% 0%; color: #fff; }
        .tab-pane { padding: 15px 0; }
        .tab-content{padding:20px}

        .card {background: #FFF none repeat scroll 0% 0%;}
    </style>

</head>





<body>

<div id="wrapper">

    <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                <img src="../static/main-admin/img/logo_dashboard.png" alt="">
            </a>
        </div>

        <ul class="nav navbar-top-links navbar-right navbar-collapse">


            <li>
                <a class="pageCat" href="/admin_welcome">
                    <i class="fa fa-dashboard fa-fw"></i> General
                </a>
            </li>


            <li>
                <a class="pageCat" href="/admin_requests">
                    <i class="fa fa-inbox fa-fw"></i> Messages
                </a>
            </li>

            <li>
                <a class="currentPage" href="/admin_database">
                    <i class="fa fa-database fa-fw"></i> Database
                </a>
            </li>

            <li>
                <a class="pageCat" href="/admin_settings_profile">
                    <i class="fa fa-cogs fa-fw"></i> Settings
                </a>
            </li>

            <li>
                <a class="pageCat" href="/logout">
                    <i class="fa fa-sign-out fa-fw"></i> Logout</a>
                </a>
            </li>
        </ul>

    </nav>






    <!-- Page Content -->
    <div id="page-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-1"></div>
                <div class="col-md-10">
                    <h3 class="page-header">Database</h3>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->

            <div class="row">
                <div class="col-md-1"></div>
                <div class="col-md-10">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Basic Information of Users
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
                                <thead>
                                <tr>
                                    <th>Status</th>
                                    <th>First Name</th>
                                    <th>Last Name</th>
                                    <th>Email Address</th>
                                    <th>Option</th>
                                </tr>
                                </thead>
                                <tbody>
                                <% list.forEach(function(element){
                                %>
                                <tr class="odd">
                                    <td><%=element.status%></td>
                                    <td><%=element.givenName%></td>
                                    <td><%=element.familyName%></td>
                                    <td><%=element.email%></td>
                                    <td><button class="btn btn-primary btn-sm" data-toggle="modal" onclick="profileRequest('<%= element.email %>')" data-target=".bd-example-modal-lg">Profile</button>
                                        &nbsp;
                                        <a class="btn btn-danger btn-sm" href="/overrideSuspension?email=<%= element.email %>">Suspend</a>
                                    </td>
                                </tr>
                                <%})%>

                                </tbody>
                            </table>
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
        </div>
        <!-- /.container-fluid -->
    </div>
    <!-- /#page-wrapper -->

</div>
<!-- /#wrapper -->


<!-- Use of Modal is referenced to: https://v4-alpha.getbootstrap.com/components/modal/ -->
<div class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="exampleModalLabel">User Profile</h4>
            </div>
            <div class="modal-body">
                <!-- Tab with material-design style is referenced to: http://bootsnipp.com/snippets/featured/material-design-tab-style -->
                <div class="row">
                    <!-- Nav tabs -->
                    <div class="card">
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a href="#tab_personal" aria-controls="home" role="tab" data-toggle="tab">Personal Information</a></li>
                            <li role="presentation"><a href="#tab_academic" aria-controls="profile" role="tab" data-toggle="tab">Academic Achievement</a></li>
                            <li role="presentation"><a href="#tab_social" aria-controls="messages" role="tab" data-toggle="tab">Social Media</a></li>
                        </ul>

                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="tab_personal">
                                <div class="container">

                                    <dt class="col-sm-3"><p>Gender</p></dt>
                                    <dd class="col-sm-9"><p id="genderField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Age</p></dt>
                                    <dd class="col-sm-9"><p id="ageField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Nationality</p></dt>
                                    <dd class="col-sm-9"><p id="nationalityField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Native Language</p></dt>
                                    <dd class="col-sm-9"><p id="nativeLanField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Secondary Language</p></dt>
                                    <dd class="col-sm-9"><p id="secondLanField">Confidential</p></dd>

                                </div>

                            </div>
                            <div role="tabpanel" class="tab-pane" id="tab_academic">
                                <div class="container">
                                    <dt class="col-sm-3"><p>Education Level Achieved</p></dt>
                                    <dd class="col-sm-9"><p id="eduLevelField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>University / Institution / School</p></dt>
                                    <dd class="col-sm-9"><p id="schoolField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Field of Study</p></dt>
                                    <dd class="col-sm-9"><p id="programField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Cumulative GPA</p></dt>
                                    <dd class="col-sm-9"><p id="cgpaField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Skills</p></dt>
                                    <dd class="col-sm-9"><p id="skillField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Awards / Certificates</p></dt>
                                    <dd class="col-sm-9"><p id="awardField">Confidential</p></dd>

                                    </dl>
                                </div>
                            </div>
                            <div role="tabpanel" class="tab-pane" id="tab_social">
                                <div class="container">
                                    <dt class="col-sm-3"><p>LinkedIn</p></dt>
                                    <dd class="col-sm-9"><p id="linkedinField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Facebook</p></dt>
                                    <dd class="col-sm-9"><p id="facebookField">Confidential</p></dd>

                                    <dt class="col-sm-3"><p>Personal Website</p></dt>
                                    <dd class="col-sm-9"><p id="webField">Confidential</p></dd>

                                    </dl>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal" id="dumpCache">Close</button>
            </div>
        </div>
    </div>
</div>



<!-- DataTables JavaScript -->
<script src="../static/main-admin/js/jquery.dataTables.min.js"></script>
<script src="../static/main-admin/js/dataTables.bootstrap.min.js"></script>
<script src="../static/main-admin/js/dataTables.responsive.js"></script>
<script src="https://cdn.datatables.net/buttons/1.2.4/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
<script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.24/build/pdfmake.min.js"></script>
<script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.24/build/vfs_fonts.js"></script>
<script src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.html5.min.js"></script>

<!-- Page-Level Demo Scripts - Tables - Use for reference -->
<script>
    // Code of buttons and DOM configuration are referenced to:
    // https://datatables.net/extensions/buttons/examples/html5/simple.html
    $(document).ready(function() {
        $('#dataTables-example').DataTable({
            responsive: true,
            pageLength: 10,
            dom: 'Bfrtip',
            buttons: [
                'excelHtml5',
                'csvHtml5',
                'pdfHtml5'
            ]
        });
    });


    function profileRequest(userEmail){
        var url="/stuProfile?stuEmail="+userEmail;
        $.get(url, function(data) {
            var list = JSON.parse(data);
            console.log(list);
            if(list.openPublic == "Yes"){
                if(list.gender!=="") {
                    document.getElementById("genderField").innerHTML = list.gender;
                }
                else{
                    document.getElementById("genderField").innerHTML="Unknown";
                }

                if(list.age!==""){
                    document.getElementById("ageField").innerHTML=list.age;
                }
                else{
                    document.getElementById("ageField").innerHTML="Unknown";
                }

                if(list.nationality!==""){
                    document.getElementById("nationalityField").innerHTML=list.nationality;
                }
                else{
                    document.getElementById("nationalityField").innerHTML="Unknown";
                }

                if(list.nativeLanguage!==""){
                    document.getElementById("nativeLanField").innerHTML=list.nativeLanguage;
                }
                else{
                    document.getElementById("nativeLanField").innerHTML = "Unknown";
                }

                if(list.secondLanguage!==""){
                    document.getElementById("secondLanField").innerHTML=list.secondLanguage;
                }
                else{
                    document.getElementById("secondLanField").innerHTML="Unknown";
                }

                if(list.eduLevel!==""){
                    document.getElementById("eduLevelField").innerHTML=list.eduLevel;
                }
                else{
                    document.getElementById("eduLevelField").innerHTML="Unknown";
                }

                if(list.schoolName!==""){
                    document.getElementById("schoolField").innerHTML=list.schoolName;
                }
                else{
                    document.getElementById("schoolField").innerHTML="Unknown";
                }

                if(list.program!==""){
                    document.getElementById("programField").innerHTML=list.program;
                }
                else{
                    document.getElementById("programField").innerHTML="Unknown";
                }

                if(list.cGPA!==""){
                    document.getElementById("cgpaField").innerHTML=list.cGPA;
                }
                else{
                    document.getElementById("cgpaField").innerHTML="Unknown";
                }

                if(list.skills!==""){
                    document.getElementById("skillField").innerHTML=list.skills;
                }
                else{
                    document.getElementById("skillField").innerHTML="Unknown";
                }

                if(list.awards!==""){
                    document.getElementById("awardField").innerHTML=list.awards;
                }
                else{
                    document.getElementById("awardField").innerHTML="Unknown";
                }

                if(list.linkedin!==""){
                    document.getElementById("linkedinField").innerHTML=list.linkedin;
                }
                else{
                    document.getElementById("linkedinField").innerHTML="Unknown";
                }

                if(list.facebook!==""){
                    document.getElementById("facebookField").innerHTML=list.facebook;
                }
                else{
                    document.getElementById("facebookField").innerHTML="Unknown";
                }

                if(list.webpage!==""){
                    document.getElementById("webField").innerHTML=list.webpage;
                }
                else{
                    document.getElementById("webField").innerHTML="Unknown";
                }


            }
        });
    }

    $("#dumpCache").click(function(){
        document.getElementById("genderField").innerHTML="Confidential";

        document.getElementById("ageField").innerHTML="Confidential";

        document.getElementById("nationalityField").innerHTML="Confidential";

        document.getElementById("nativeLanField").innerHTML = "Confidential";

        document.getElementById("secondLanField").innerHTML="Confidential";

        document.getElementById("eduLevelField").innerHTML="Confidential";

        document.getElementById("schoolField").innerHTML="Confidential";

        document.getElementById("programField").innerHTML="Confidential";

        document.getElementById("cgpaField").innerHTML="Confidential";

        document.getElementById("skillField").innerHTML="Confidential";

        document.getElementById("awardField").innerHTML="Confidential";

        document.getElementById("linkedinField").innerHTML="Confidential";

        document.getElementById("facebookField").innerHTML="Confidential";

        document.getElementById("webField").innerHTML="Confidential";

    });
</script>


</body>

</html>
